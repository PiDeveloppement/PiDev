<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.image.*?>
<?import de.jensd.fx.glyphs.fontawesome.FontAwesomeIconView?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.pidev.HelloController"
            prefHeight="900" prefWidth="1400"
            style="-fx-background-color: #f8f9fa;">

    <left>
        <!-- Sidebar -->
        <VBox prefWidth="260" spacing="0"
              style="-fx-background-color: linear-gradient(to bottom, #1565c0, #0d47a1);">

            <!-- Menu navigation SCROLLABLE -->
            <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS"
                        style="-fx-background-color: transparent; -fx-border-color: transparent;">

                <VBox spacing="0" style="-fx-padding: 20 15;">

                    <!-- Logo Section -->
                    <VBox style="-fx-background-color: transparent; -fx-padding: 20 15;"
                          alignment="CENTER" spacing="6">
                        <ImageView fitHeight="140" fitWidth="140" preserveRatio="true">
                            <image>
                                <Image url="@event/images/logo.png"/>
                            </image>
                        </ImageView>
                        <Label text="Gestion d'Événements"
                               style="-fx-text-fill: rgba(255,255,255,0.85); -fx-font-size: 13px;"/>
                    </VBox>

                    <!-- Dashboard -->
                    <Button fx:id="dashboardBtn" text="  Dashboard" onAction="#showDashboard"
                            alignment="CENTER_LEFT" styleClass="flat-menu-btn">
                        <graphic>
                            <FontAwesomeIconView glyphName="DASHBOARD" size="16" fill="rgba(255,255,255,0.85)"/>
                        </graphic>
                    </Button>

                    <!-- Événements (toggle) -->
                    <VBox spacing="0">
                        <Button fx:id="eventsToggleBtn" onAction="#toggleEvents"
                                alignment="CENTER_LEFT" styleClass="flat-menu-btn">
                            <graphic>
                                <HBox spacing="8" alignment="CENTER_LEFT" prefWidth="200">
                                    <FontAwesomeIconView glyphName="CALENDAR" size="16" fill="rgba(255,255,255,0.85)"/>
                                    <Label text="Événements" style="-fx-text-fill: rgba(255,255,255,0.85); -fx-font-size: 14px;" HBox.hgrow="ALWAYS"/>
                                    <Text fx:id="eventsArrow" text="▼" fill="rgba(255,255,255,0.6)" style="-fx-font-size: 10px;"/>
                                </HBox>
                            </graphic>
                        </Button>

                        <!-- Sous-menu Événements -->
                        <VBox fx:id="eventsSubmenu" spacing="0"
                              style="-fx-padding: 0 0 0 30;"
                              visible="true" managed="true">

                            <Button text="  Liste des événements" onAction="#showEventsList"
                                    alignment="CENTER_LEFT" styleClass="flat-submenu-btn">
                                <graphic>
                                    <FontAwesomeIconView glyphName="LIST" size="14" fill="rgba(255,255,255,0.75)"/>
                                </graphic>
                            </Button>

                            <Button fx:id="categoriesBtn" text="  Catégories" onAction="#showCategories"
                                    alignment="CENTER_LEFT" styleClass="flat-submenu-btn">
                                <graphic>
                                    <FontAwesomeIconView glyphName="TAG" size="14" fill="rgba(255,255,255,0.75)"/>
                                </graphic>
                            </Button>

                            <Button text="  Billets" onAction="#showTickets"
                                    alignment="CENTER_LEFT" styleClass="flat-submenu-btn">
                                <graphic>
                                    <FontAwesomeIconView glyphName="TICKET" size="14" fill="rgba(255,255,255,0.75)"/>
                                </graphic>
                            </Button>
                        </VBox>
                    </VBox>

                    <!-- Ressources (toggle) -->
                    <VBox spacing="0">
                        <Button fx:id="resourcesToggleBtn" onAction="#toggleResources"
                                alignment="CENTER_LEFT" styleClass="flat-menu-btn">
                            <graphic>
                                <HBox spacing="8" alignment="CENTER_LEFT" prefWidth="200">
                                    <FontAwesomeIconView glyphName="CUBE" size="16" fill="rgba(255,255,255,0.85)"/>
                                    <Label text="Ressources" style="-fx-text-fill: rgba(255,255,255,0.85); -fx-font-size: 14px;" HBox.hgrow="ALWAYS"/>
                                    <Text fx:id="resourcesArrow" text="▶" fill="rgba(255,255,255,0.6)" style="-fx-font-size: 10px;"/>
                                </HBox>
                            </graphic>
                        </Button>

                        <!-- Sous-menu Ressources -->
                        <VBox fx:id="resourcesSubmenu" spacing="0"
                              style="-fx-padding: 0 0 0 30;"
                              visible="false" managed="false">

                            <Button text="  Salles" onAction="#showRooms"
                                    alignment="CENTER_LEFT" styleClass="flat-submenu-btn">
                                <graphic>
                                    <FontAwesomeIconView glyphName="BUILDING" size="14" fill="rgba(255,255,255,0.75)"/>
                                </graphic>
                            </Button>

                            <Button text="  Équipements" onAction="#showEquipments"
                                    alignment="CENTER_LEFT" styleClass="flat-submenu-btn">
                                <graphic>
                                    <FontAwesomeIconView glyphName="DESKTOP" size="14" fill="rgba(255,255,255,0.75)"/>
                                </graphic>
                            </Button>

                            <Button text="  Réservations" onAction="#showReservations"
                                    alignment="CENTER_LEFT" styleClass="flat-submenu-btn">
                                <graphic>
                                    <FontAwesomeIconView glyphName="CALENDAR_CHECK_ALT" size="14" fill="rgba(255,255,255,0.75)"/>
                                </graphic>
                            </Button>
                        </VBox>
                    </VBox>

                    <!-- Participants -->
                    <Button fx:id="participantsBtn" text="  Participants" onAction="#showParticipants"
                            alignment="CENTER_LEFT" styleClass="flat-menu-btn">
                        <graphic>
                            <FontAwesomeIconView glyphName="USERS" size="16" fill="rgba(255,255,255,0.85)"/>
                        </graphic>
                    </Button>

                    <!-- Sponsors -->
                    <Button fx:id="sponsorsBtn" text="  Sponsors" onAction="#showSponsors"
                            alignment="CENTER_LEFT" styleClass="flat-menu-btn">
                        <graphic>
                            <FontAwesomeIconView glyphName="HANDSHAKE_ALT" size="16" fill="rgba(255,255,255,0.85)"/>
                        </graphic>
                    </Button>

                    <!-- Budget -->
                    <Button fx:id="budgetBtn" text="  Budget" onAction="#showBudget"
                            alignment="CENTER_LEFT" styleClass="flat-menu-btn">
                        <graphic>
                            <FontAwesomeIconView glyphName="MONEY" size="16" fill="rgba(255,255,255,0.85)"/>
                        </graphic>
                    </Button>

                    <!-- Paramètres -->
                    <Button fx:id="settingsBtn" text="  Paramètres" onAction="#showSettings"
                            alignment="CENTER_LEFT" styleClass="flat-menu-btn">
                        <graphic>
                            <FontAwesomeIconView glyphName="COG" size="16" fill="rgba(255,255,255,0.85)"/>
                        </graphic>
                    </Button>

                    <Region style="-fx-min-height: 20;"/>

                    <!-- Déconnexion -->
                    <Button text="  Déconnexion" onAction="#handleLogout"
                            alignment="CENTER_LEFT" styleClass="flat-menu-btn"
                            style="-fx-text-fill: #ffcdd2;">
                        <graphic>
                            <FontAwesomeIconView glyphName="SIGN_OUT" size="16" fill="#ffcdd2"/>
                        </graphic>
                    </Button>

                    <Region style="-fx-min-height: 30;"/>
                </VBox>
            </ScrollPane>
        </VBox>
    </left>

    <center>
        <StackPane fx:id="contentArea" style="-fx-background-color: #f8f9fa;"/>
    </center>

</BorderPane>