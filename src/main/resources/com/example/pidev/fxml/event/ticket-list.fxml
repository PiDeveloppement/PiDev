<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.*?>

<VBox xmlns="http://javafx.com/javafx/17"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.example.pidev.controller.event.EventTicketListController"
      spacing="0"
      styleClass="page-background"
      stylesheets="@../../css/atlantafx-custom.css">


    <!-- ===================== ZONE SCROLLABLE ===================== -->
    <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS"
                style="-fx-background-color: transparent; -fx-border-color: transparent;">

        <VBox spacing="0">

            <!-- ===================== HEADER ===================== -->
            <HBox style="-fx-background-color: white; -fx-padding: 15 30; -fx-border-color: #e9ecef; -fx-border-width: 0 0 1 0;"
                  alignment="CENTER_LEFT">

                <Region HBox.hgrow="ALWAYS"/>

                <HBox spacing="15" alignment="CENTER">
                    <VBox alignment="CENTER" spacing="4"
                          style="-fx-padding: 15 28; -fx-background-color: #d1f4e0;
                                 -fx-background-radius: 10; -fx-border-color: #95d5b2;
                                 -fx-border-width: 1.5; -fx-border-radius: 10; -fx-min-width: 130;">
                        <Label fx:id="totalLabel" text="0"
                               style="-fx-font-size: 26px; -fx-font-weight: bold; -fx-text-fill: #1b5e20;"/>
                        <Label text="Total"
                               style="-fx-font-size: 12px; -fx-font-weight: 600; -fx-text-fill: #2d6a4f;"/>
                    </VBox>

                    <VBox alignment="CENTER" spacing="4"
                          style="-fx-padding: 15 28; -fx-background-color: #cfe2ff;
                                 -fx-background-radius: 10; -fx-border-color: #9ec5fe;
                                 -fx-border-width: 1.5; -fx-border-radius: 10; -fx-min-width: 130;">
                        <Label fx:id="usedLabel" text="0"
                               style="-fx-font-size: 26px; -fx-font-weight: bold; -fx-text-fill: #004085;"/>
                        <Label text="UtilisÃ©s"
                               style="-fx-font-size: 12px; -fx-font-weight: 600; -fx-text-fill: #0056b3;"/>
                    </VBox>
                </HBox>
            </HBox>

            <!-- ===================== CONTENU ===================== -->
            <VBox styleClass="page-content" style="-fx-padding: 25 30;">

                <VBox styleClass="content-card">

                    <HBox alignment="CENTER_LEFT" spacing="10" styleClass="section-header">
                        <Label text="ðŸ“‹" style="-fx-font-size: 18px;"/>
                        <Label text="Liste des Tickets" styleClass="section-title"/>
                    </HBox>

                    <!-- TOOLBAR -->
                    <HBox spacing="15" alignment="CENTER_LEFT" styleClass="toolbar">

                        <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-pref-width: 400px;">
                            <TextField fx:id="searchField"
                                       promptText="Rechercher un ticket par code..."
                                       HBox.hgrow="ALWAYS"
                                       styleClass="filter-input"/>
                        </HBox>

                        <ComboBox fx:id="eventFilter"
                                  promptText="â–¼ Ã‰vÃ©nement"
                                  prefWidth="200"
                                  styleClass="filter-input"/>

                        <ComboBox fx:id="statusFilter"
                                  promptText="â–¼ Statut"
                                  prefWidth="150"
                                  styleClass="filter-input"/>

                        <Region HBox.hgrow="ALWAYS"/>

                        <Button fx:id="scanBtn" text="ðŸ“± Scanner QR" onAction="#handleScan"
                                styleClass="btn-primary"
                                minWidth="140"/>

                        <Button fx:id="addBtn" text="âž• CrÃ©er un ticket" onAction="#handleAdd"
                                styleClass="btn-primary"
                                minWidth="140"/>
                    </HBox>

                    <HBox spacing="15" alignment="CENTER_LEFT" styleClass="toolbar-secondary">
                        <Button onAction="#handleRefresh" styleClass="btn-refresh-icon">
                            <graphic>
                                <Label text="ðŸ”„" style="-fx-font-size: 16px;"/>
                            </graphic>
                        </Button>

                        <Region HBox.hgrow="ALWAYS"/>

                        <Label fx:id="resultLabel"
                               text="0 rÃ©sultat(s) trouvÃ©(s)"
                               styleClass="result-label"/>
                    </HBox>

                    <!-- TABLEAU -->
                    <TableView fx:id="ticketTable"
                               prefHeight="600"
                               styleClass="data-table">

                        <columns>
                            <TableColumn fx:id="ticketCodeCol"
                                         text="Code Ticket"
                                         prefWidth="200"
                                         minWidth="150"/>

                            <TableColumn fx:id="eventCol"
                                         text="Ã‰vÃ©nement"
                                         prefWidth="150"
                                         minWidth="120"/>

                            <TableColumn fx:id="userCol"
                                         text="Participant"
                                         prefWidth="150"
                                         minWidth="120"/>

                            <TableColumn fx:id="statusCol"
                                         text="Statut"
                                         prefWidth="120"
                                         minWidth="100"/>

                            <TableColumn fx:id="createdAtCol"
                                         text="Date crÃ©ation"
                                         prefWidth="150"
                                         minWidth="120"/>

                            <TableColumn fx:id="actionsCol"
                                         text="Actions"
                                         prefWidth="150"
                                         minWidth="120"
                                         style="-fx-alignment: CENTER;"/>
                        </columns>

                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                        </columnResizePolicy>
                    </TableView>

                </VBox>
            </VBox>
        </VBox>
    </ScrollPane>

</VBox>