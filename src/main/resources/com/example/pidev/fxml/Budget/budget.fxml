<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>

<BorderPane prefHeight="900" prefWidth="1600" style="-fx-background-color: #f1f5f9;" stylesheets="@../../css/design-system.css" xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.pidev.controller.budget.BudgetListController">

    <center>
        <ScrollPane fx:id="pageScroll" fitToWidth="true" hbarPolicy="NEVER" style="-fx-background-color: transparent; -fx-border-color: transparent;" vbarPolicy="AS_NEEDED">
            <content>
                <VBox spacing="0">

                    <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-background-color: white; -fx-padding: 28 35; -fx-border-color: #e2e8f0; -fx-border-width: 0 0 2 0; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 8, 0, 0, 2);">
                        <VBox spacing="4">
                            <Label styleClass="label-title" text="ðŸ’° Gestion des Budgets" />
                            <Label styleClass="label-description" text="Suivi financier dÃ©taillÃ© par Ã©vÃ©nement" />
                        </VBox>
                        <Region HBox.hgrow="ALWAYS" />
                        <VBox alignment="CENTER_RIGHT" spacing="2" />
                    </HBox>

                    <HBox spacing="14" style="-fx-padding: 24 35; -fx-background-color: #f1f5f9; -fx-border-color: #e2e8f0; -fx-border-width: 0 0 1 0;">
                        <VBox spacing="10" styleClass="stat-card stat-card-emerald" HBox.hgrow="ALWAYS">
                            <HBox alignment="CENTER_LEFT" spacing="12">
                                <Label style="-fx-font-size: 32px;" text="ðŸ’°" />
                                <VBox spacing="3" HBox.hgrow="ALWAYS">
                                    <Label styleClass="label-section" text="Total Budgets" />
                                    <Label fx:id="kpiCountLabel" style="-fx-text-fill: #15803d;" styleClass="label-value" text="0" />
                                </VBox>
                            </HBox>
                            <Label style="-fx-text-fill: #059669; -fx-font-size: 12px; -fx-font-weight: bold;" />
                        </VBox>
                        <VBox spacing="10" styleClass="stat-card stat-card-blue" HBox.hgrow="ALWAYS">
                            <HBox alignment="CENTER_LEFT" spacing="12">
                                <Label style="-fx-font-size: 32px;" text="ðŸ“¥" />
                                <VBox spacing="3" HBox.hgrow="ALWAYS">
                                    <Label styleClass="label-section" text="Budget Initial" />
                                    <Label fx:id="kpiInitialLabel" style="-fx-text-fill: #1e40af;" styleClass="label-value" text="0,00 DT" />
                                </VBox>
                            </HBox>
                            <Label style="-fx-text-fill: #2563eb; -fx-font-size: 12px; -fx-font-weight: bold;" />
                        </VBox>
                        <VBox spacing="10" styleClass="stat-card stat-card-purple" HBox.hgrow="ALWAYS">
                            <HBox alignment="CENTER_LEFT" spacing="12">
                                <Label style="-fx-font-size: 32px;" text="ðŸ“ˆ" />
                                <VBox spacing="3" HBox.hgrow="ALWAYS">
                                    <Label styleClass="label-section" text="RentabilitÃ©" />
                                    <Label fx:id="kpiRentLabel" style="-fx-text-fill: #7c3aed;" styleClass="label-value" text="0,00 DT" />
                                </VBox>
                            </HBox>
                            <Label style="-fx-text-fill: #a855f7; -fx-font-size: 12px; -fx-font-weight: bold;" />
                        </VBox>
                        <VBox spacing="10" styleClass="stat-card stat-card-rose" HBox.hgrow="ALWAYS">
                            <HBox alignment="CENTER_LEFT" spacing="12">
                                <Label style="-fx-font-size: 32px;" text="âš " />
                                <VBox spacing="3" HBox.hgrow="ALWAYS">
                                    <Label styleClass="label-section" text="En DÃ©ficit" />
                                    <Label fx:id="kpiDeficitLabel" style="-fx-text-fill: #be123c;" styleClass="label-value" text="0" />
                                </VBox>
                            </HBox>
                            <Label style="-fx-text-fill: #e11d48; -fx-font-size: 12px; -fx-font-weight: bold;" />
                        </VBox>
                    </HBox>

                    <HBox alignment="CENTER_LEFT" spacing="14" style="-fx-padding: 20 35; -fx-background-color: white; -fx-border-color: #e2e8f0; -fx-border-width: 0 0 1 0;">
                        <ComboBox fx:id="healthFilter" prefWidth="200" promptText="ðŸ¥ SantÃ© FinanciÃ¨re" styleClass="text-field" />
                        <ComboBox fx:id="eventFilter" prefWidth="200" promptText="ðŸ“… Ã‰vÃ©nement" styleClass="text-field" />
                        <ComboBox fx:id="statusFilter" prefWidth="180" promptText="ðŸ“Œ Ã‰tat" styleClass="text-field" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="addBtn" minHeight="40" minWidth="160" styleClass="btn-success" text="âž• Nouveau Budget" />
                    </HBox>

                    <HBox alignment="CENTER" style="-fx-padding: 20 35;">
                        <BarChart fx:id="budgetComparisonChart" prefWidth="900" prefHeight="400"
                                  title="Comparaison des 5 derniers budgets">
                            <xAxis>
                                <CategoryAxis label="Ã‰vÃ©nement"/>
                            </xAxis>
                            <yAxis>
                                <NumberAxis label="Montant (DT)"/>
                            </yAxis>
                        </BarChart>
                    </HBox>

                    <VBox spacing="20" style="-fx-padding: 28 35;" VBox.vgrow="ALWAYS">
                        <Label styleClass="label-subtitle" text="ðŸ“‹ Liste des Budgets" />
                        <TilePane fx:id="cardsPane" hgap="16" prefColumns="3" style="-fx-padding: 10;" vgap="16" />
                        <Label fx:id="statusLabel" styleClass="label-description" text="..." />
                    </VBox>

                </VBox>
            </content>
        </ScrollPane>
    </center>
</BorderPane>