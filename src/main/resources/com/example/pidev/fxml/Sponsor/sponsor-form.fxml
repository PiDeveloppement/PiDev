<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.pidev.controller.sponsor.SponsorFormController"
            style="-fx-background-color: white; -fx-background-radius: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 5);"
            prefWidth="600" prefHeight="800">
    <padding>
        <Insets top="25" right="30" bottom="25" left="30"/>
    </padding>

    <top>
        <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 0 0 20 0;">
            <Label fx:id="titleLabel" text="Sponsor"
                   style="-fx-font-size: 28px; -fx-font-weight: 800; -fx-text-fill: #0f172a;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label text="EventFlow" style="-fx-text-fill: #64748b; -fx-font-weight: 700; -fx-font-size: 14px;"/>
        </HBox>
    </top>

    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color:transparent; -fx-border-color:transparent;">
            <VBox spacing="20" style="-fx-padding: 0 5 0 5;">

                <GridPane hgap="15" vgap="15">
                    <columnConstraints>
                        <ColumnConstraints minWidth="120" prefWidth="120" maxWidth="150" halignment="RIGHT"/>
                        <ColumnConstraints minWidth="350" prefWidth="380" maxWidth="450" hgrow="ALWAYS"/>
                    </columnConstraints>

                    <!-- Ã‰vÃ©nement -->
                    <Label text="ðŸ“… Ã‰vÃ©nement" style="-fx-font-weight: 700; -fx-text-fill: #334155;" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                    <ComboBox fx:id="eventComboBox" promptText="Choisir un Ã©vÃ©nement" style="-fx-background-radius: 12; -fx-border-radius: 12; -fx-padding: 10 15; -fx-background-color: #f8fafc; -fx-border-color: #cbd5e1; -fx-border-width: 1.5;" maxWidth="Infinity" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                    <!-- Entreprise -->
                    <Label text="ðŸ¢ Entreprise" style="-fx-font-weight: 700; -fx-text-fill: #334155;" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                    <TextField fx:id="companyField" promptText="Nom entreprise" style="-fx-background-radius: 12; -fx-border-radius: 12; -fx-padding: 10 15; -fx-background-color: #f8fafc; -fx-border-color: #cbd5e1; -fx-border-width: 1.5;" maxWidth="Infinity" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                    <!-- Email -->
                    <Label text="ðŸ“§ Email contact" style="-fx-font-weight: 700; -fx-text-fill: #334155;" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                    <TextField fx:id="emailField" promptText="ex: sponsor@gmail.com" style="-fx-background-radius: 12; -fx-border-radius: 12; -fx-padding: 10 15; -fx-background-color: #f8fafc; -fx-border-color: #cbd5e1; -fx-border-width: 1.5;" maxWidth="Infinity" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                    <!-- TÃ©lÃ©phone (WhatsApp) -->
                    <Label text="ðŸ“ž TÃ©lÃ©phone (WhatsApp)" style="-fx-font-weight: 700; -fx-text-fill: #334155;" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                    <TextField fx:id="phoneField" promptText="216XXXXXXXX" style="-fx-background-radius: 12; -fx-border-radius: 12; -fx-padding: 10 15; -fx-background-color: #f8fafc; -fx-border-color: #cbd5e1; -fx-border-width: 1.5;" maxWidth="Infinity" GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                    <!-- SÃ©parateur -->
                    <Separator GridPane.rowIndex="4" GridPane.columnSpan="2" style="-fx-padding: 10 0;"/>

                    <!-- Logo -->
                    <Label text="ðŸ–¼ï¸ Logo" style="-fx-font-weight: 700; -fx-text-fill: #334155;" GridPane.rowIndex="5" GridPane.columnIndex="0"/>

                    <VBox spacing="12" GridPane.rowIndex="5" GridPane.columnIndex="1">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Button text="Choisir Logo" onAction="#onChooseLogo"
                                    style="-fx-background-color: #eff6ff; -fx-text-fill: #1d4ed8;
                                           -fx-font-weight: 800; -fx-background-radius: 12; -fx-padding: 10 18; -fx-border-color: #b3d9ff; -fx-border-width: 1; -fx-border-radius: 12;"/>
                            <Label fx:id="logoFileLabel" text="Aucun fichier choisi" style="-fx-text-fill: #334155;"/>
                        </HBox>

                        <StackPane prefHeight="140" style="-fx-background-color:#f1f5f9; -fx-background-radius: 14; -fx-border-radius:14; -fx-border-color:#e2e8f0; -fx-border-width: 1.5;">
                            <ImageView fx:id="logoPreview" fitWidth="110" fitHeight="110" preserveRatio="true"/>
                        </StackPane>

                        <TextField fx:id="logoField" editable="false"
                                   promptText="URL logo (remplie automatiquement)"
                                   style="-fx-background-radius: 12; -fx-border-radius: 12; -fx-padding: 10 15; -fx-background-color: #f1f5f9; -fx-border-color: #cbd5e1; -fx-border-width: 1.5;"/>
                    </VBox>

                    <!-- Bouton d'analyse -->
                    <Label text="ðŸ¤– IA Logo" style="-fx-font-weight: 700; -fx-text-fill: #334155;" GridPane.rowIndex="6" GridPane.columnIndex="0"/>
                    <VBox spacing="8" GridPane.rowIndex="6" GridPane.columnIndex="1">
                        <Button fx:id="analyzeLogoBtn" text="ðŸ” Analyser le logo"
                                style="-fx-background-color: #2563eb; -fx-text-fill: white; -fx-font-weight: 800; -fx-background-radius: 12; -fx-padding: 10 18; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(37,99,235,0.2), 5, 0, 0, 2);"/>
                        <TextArea fx:id="visionResultArea" prefRowCount="3" editable="false" wrapText="true"
                                  style="-fx-font-family: monospace; -fx-background-radius: 12; -fx-border-radius: 12; -fx-padding: 8; -fx-background-color: #f8fafc; -fx-border-color: #cbd5e1; -fx-border-width: 1.5;"/>
                    </VBox>

                    <!-- Contribution -->
                    <Label text="ðŸ’° Contribution" style="-fx-font-weight: 700; -fx-text-fill: #334155;" GridPane.rowIndex="7" GridPane.columnIndex="0"/>
                    <HBox spacing="10" GridPane.rowIndex="7" GridPane.columnIndex="1">
                        <TextField fx:id="contributionField" promptText="ex: 3500" HBox.hgrow="ALWAYS"
                                   style="-fx-background-radius: 12; -fx-border-radius: 12; -fx-padding: 10 15; -fx-background-color: #f8fafc; -fx-border-color: #cbd5e1; -fx-border-width: 1.5;"/>
                        <ComboBox fx:id="currencyComboBox" prefWidth="120" style="-fx-background-radius: 12; -fx-border-radius: 12; -fx-padding: 10 12; -fx-background-color: #f8fafc; -fx-border-color: #cbd5e1; -fx-border-width: 1.5;"/>
                    </HBox>

                    <!-- RÃ©sultat conversion -->
                    <Label text="ðŸ’± En TND" style="-fx-font-weight: 700; -fx-text-fill: #334155;" GridPane.rowIndex="8" GridPane.columnIndex="0"/>
                    <HBox alignment="CENTER_LEFT" GridPane.rowIndex="8" GridPane.columnIndex="1">
                        <Label fx:id="convertedAmountLabel" style="-fx-text-fill: #059669; -fx-font-weight: 800; -fx-font-size: 16px; -fx-background-color: #d1fae5; -fx-background-radius: 12; -fx-padding: 12 20; -fx-border-color: #a7f3d0; -fx-border-width: 1.5; -fx-border-radius: 12; -fx-min-width: 200;"/>
                    </HBox>
                </GridPane>

                <Label fx:id="errorLabel" text=""
                       style="-fx-text-fill: #dc2626; -fx-font-weight: 700; -fx-padding: 5 0;"/>
            </VBox>
        </ScrollPane>
    </center>

    <bottom>
        <HBox alignment="CENTER_RIGHT" spacing="15" style="-fx-padding: 20 0 0 0;">
            <Button text="Annuler" onAction="#onCancel"
                    style="-fx-background-color: #e2e8f0; -fx-text-fill: #334155; -fx-font-weight: 700; -fx-font-size: 14px; -fx-background-radius: 12; -fx-padding: 12 30; -fx-cursor: hand; -fx-border-color: #cbd5e1; -fx-border-width: 1; -fx-border-radius: 12;"/>
            <Button text="Enregistrer" onAction="#onSave"
                    style="-fx-background-color: #10b981; -fx-text-fill: white; -fx-font-weight: 800; -fx-font-size: 14px; -fx-background-radius: 12; -fx-padding: 12 30; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(16,185,129,0.3), 8, 0, 0, 3);"/>
        </HBox>
    </bottom>
</BorderPane>