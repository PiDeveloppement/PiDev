<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.web.WebView?>
<?import javafx.scene.text.Text?>

<VBox spacing="20" style="-fx-background-color: #f8fafc;" stylesheets="@style.css"
      xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.example.pidev.controller.resource.SalleController">

    <padding><Insets top="25" right="30" bottom="25" left="30"/></padding>

    <HBox spacing="20" alignment="CENTER_LEFT">
        <VBox HBox.hgrow="ALWAYS">
            <Label text="Gestion des Salles" styleClass="header-title" style="-fx-font-size: 24px;"/>
            <Label text="Administration des bÃ¢timents et emplacements" styleClass="header-subtitle"/>
        </VBox>

        <HBox spacing="12">
            <VBox alignment="CENTER" styleClass="stat-card, stat-card-blue">
                <Label fx:id="totalSallesLabel" text="0" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                <Label text="Total" style="-fx-font-size: 10px;"/>
            </VBox>
            <VBox alignment="CENTER" styleClass="stat-card, stat-card-green">
                <Label fx:id="sallesOccupeesLabel" text="0" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                <Label text="OccupÃ©es" style="-fx-font-size: 10px;"/>
            </VBox>
        </HBox>
    </HBox>

    <HBox spacing="10" alignment="CENTER_LEFT" styleClass="table-container" style="-fx-padding: 15;">
        <TextField fx:id="nameField" promptText="Nom" styleClass="search-field" prefWidth="120"/>
        <TextField fx:id="capacityField" promptText="CapacitÃ©" styleClass="search-field" prefWidth="80"/>
        <TextField fx:id="buildingField" promptText="BÃ¢timent" styleClass="search-field" prefWidth="100"/>
        <TextField fx:id="floorField" promptText="Ã‰tage" styleClass="search-field" prefWidth="70"/>
        <ComboBox fx:id="statusCombo" promptText="Statut" styleClass="combo-box-sponsor" prefWidth="130"/>

        <Button onAction="#choisirImage" style="-fx-background-color: #f1f5f9; -fx-cursor: hand; -fx-background-radius: 8; -fx-padding: 8;">
            <graphic><Text text="ðŸ“·" /></graphic>
        </Button>

        <StackPane style="-fx-background-color: #f8fafc; -fx-background-radius: 5; -fx-border-color: #e2e8f0; -fx-border-radius: 5;">
            <ImageView fx:id="previewImage" fitHeight="35" fitWidth="35" preserveRatio="true" />
        </StackPane>

        <Region HBox.hgrow="ALWAYS" />
        <Button fx:id="btnValider" text="Enregistrer" onAction="#ajouterSalle" styleClass="new-sponsor-button"/>
    </HBox>

    <HBox spacing="20" VBox.vgrow="ALWAYS">
        <VBox styleClass="table-container" HBox.hgrow="ALWAYS">
            <TableView fx:id="salleTable" styleClass="sponsor-table" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="idCol" text="ID" prefWidth="40" />
                    <TableColumn fx:id="imageCol" text="AperÃ§u" prefWidth="70" />
                    <TableColumn fx:id="nameCol" text="Nom" prefWidth="120" />
                    <TableColumn fx:id="capacityCol" text="Cap." prefWidth="50" />
                    <TableColumn fx:id="buildingCol" text="BÃ¢timent" prefWidth="90" />
                    <TableColumn fx:id="floorCol" text="Etg" prefWidth="40" />
                    <TableColumn fx:id="statusCol" text="Statut" prefWidth="100" />
                    <TableColumn fx:id="actionCol" text="Actions" prefWidth="150" />
                </columns>
                <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
            </TableView>
        </VBox>

        <VBox spacing="10" prefWidth="380" styleClass="table-container" style="-fx-padding: 15;">
            <Label text="ðŸ“ Localisation" styleClass="table-header-label" style="-fx-font-size: 16px;"/>
            <Separator styleClass="separator-sponsor" />
            <AnchorPane VBox.vgrow="ALWAYS" style="-fx-background-color: #f8fafc; -fx-background-radius: 10; -fx-overflow: hidden;">
                <WebView fx:id="mapWebView" AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" />
            </AnchorPane>
        </VBox>
    </HBox>
</VBox>